# Python 기반 브라우저 점프 게임 개발 요구사항

## 1. 프로젝트 개요

본 프로젝트는 사용자가 키보드를 사용하여 캐릭터를 조종하고 장애물을 피하는 간단한 2D 점프 게임을 개발하는 것을 목표로 합니다. 이 게임은 Chrome 브라우저의 오프라인 공룡 게임과 유사한 형태를 가지며, 추후 캐릭터와 장애물 이미지를 PNG 파일로 교체할 수 있도록 설계됩니다. 최종적으로 Pyodide를 활용하여 웹 브라우저에서 실행 가능한 형태로 GitHub Pages 기반 블로그에 게시될 예정입니다.

이 프로젝트는 Pyodide를 통해 Python으로 작성된 게임 코드를 웹 브라우저에서 WebAssembly로 실행하여, 서버 측 처리 없이도 순수 클라이언트 측에서 게임을 구동할 수 있도록 구현합니다.

## 2. 핵심 기능

### 2.1. 게임 플레이
* **캐릭터:** 사용자가 조종하는 단일 캐릭터가 존재합니다.
    * 초기에는 간단한 도형 (예: 사각형)으로 표시합니다.
    * 추후 PNG 이미지로 교체 가능해야 합니다.
* **점프:** 스페이스바 또는 위쪽 화살표 키를 누르면 캐릭터가 점프합니다.
    * 점프 높이와 지속 시간은 일정해야 합니다.
    * 중력이 적용되어 캐릭터는 점프 후 바닥으로 내려옵니다.
* **장애물:** 오른쪽에서 왼쪽으로 일정한 속도로 다가오는 장애물들이 등장합니다.
    * 초기에는 간단한 도형 (예: 사각형 또는 삼각형)으로 표시합니다.
    * 다양한 형태와 크기의 장애물이 무작위 또는 패턴에 따라 생성될 수 있어야 합니다 (예: 낮은 장애물, 높은 장애물).
    * 추후 PNG 이미지로 교체 가능해야 합니다.
* **이동:** 캐릭터는 수평으로 이동하지 않고 제자리에서 점프만 합니다. 장애물이 캐릭터를 향해 이동합니다.
* **충돌 감지:** 캐릭터와 장애물 간의 충돌을 감지해야 합니다.
* **게임 오버:** 캐릭터가 장애물과 충돌하면 게임이 종료됩니다.
* **점수:** 게임이 진행되는 동안 시간이 지남에 따라 또는 장애물을 성공적으로 피할 때마다 점수가 증가합니다.
    * 점수는 화면에 표시되어야 합니다.
* **재시작:** 게임 오버 후 사용자가 게임을 다시 시작할 수 있는 기능 (예: 특정 키를 누르거나 화면 클릭)이 있어야 합니다.

### 2.2. 그래픽 및 인터페이스
* **배경:** 단색 또는 간단한 배경으로 시작합니다.
* **게임 화면:** 게임 요소(캐릭터, 장애물, 점수)를 표시할 명확한 영역이 있어야 합니다.
* **이미지 로딩:** PNG 파일을 로드하여 캐릭터와 장애물에 적용할 수 있어야 합니다.

### 2.3. 기술적 요소
* **Pyodide 호환성:** 작성된 Python 코드는 Pyodide 환경에서 실행될 수 있어야 합니다.
  * Python 3.10 호환 문법 사용
  * 표준 라이브러리와 Pyodide 제공 모듈만 사용 (외부 의존성 최소화)
  * 현재 Pyodide가 제공하는 유틸리티 함수 이용

* **브라우저 이벤트 처리:** 키보드 입력(점프, 재시작)을 브라우저 환경에서 감지하고 처리할 수 있어야 합니다.
  * JavaScript 이벤트를 Python 함수에 바인딩하는 방법 구현
  * 이벤트 처리에서의 지연 최소화 전략 적용

* **게임 루프:** 안정적인 프레임 속도로 게임 상태를 업데이트하고 화면을 렌더링하는 게임 루프가 필요합니다.
  * requestAnimationFrame API를 활용한 효율적인 렌더링 스케쥴링
  * 메모리 사용량 최소화를 위한 객체 관리
  * 렌더링과 물리 연산 분리를 통한 최적화

* **Canvas 렌더링:** HTML5 Canvas를 활용한 효율적인 그래픽 처리
  * Pyodide의 `js` 모듈을 통한 Canvas API 접근
  * 필요한 경우에만 캔버스 렌더링 (비화면 요소는 제외)

## 3. 기술 스택 및 개발 환경

### 3.1 프로그래밍 & 기술 스택
* **프로그래밍 언어:** Python 3.10 (현재 Pyodide에서 지원하는 버전)
* **렌더링 기술:** HTML5 Canvas API (JavaScript를 통한 접근)
* **런타임:** Pyodide (WebAssembly 기반 Python 런타임)
* **주요 라이브러리:**
    * **개발 단계:** 
        * **Pygame (초기 로직 개발용):** 데스크톱에서의 게임 로직 개발과 프로토타이핑에 활용
    * **배포 단계:**
        * **Pyodide `js` 모듈:** HTML5 Canvas API 및 DOM 접근을 위한 핵심 모듈
        * **NumPy:** 경경우 필요한 효율적 배열 처리와 수학 계산에 활용
* **파일 형식:**
    * PNG 이미지 파일 (참조 해상도 512x512 최대)
    * JavaScript 연결 코드 (.js)
    * Python 게임 코드 (.py)
    * HTML 틀 & CSS 스타일시트

### 3.2 개발 환경
* **에디터:** VS Code + Python 확장 프로그램
* **버전 관리:** Git/GitHub
* **로컬 개발 환경:**
    * Python 3.10 이상
    * 간단한 로컬 테스트 웹서버 (`python -m http.server`)
* **테스트 브라우저:** 
    * 주요 개발: Chrome/Firefox
    * 호환성 테스트: Safari, Edge
* **테스트 환경:** 
    * 로컬 개발용 HTTP 서버
    * GitHub Pages 가상 테스트 환경

## 4. 에셋 요구사항

### 4.1 그래픽 에셋
* **캐릭터 이미지 (PNG 형식, 투명 배경):**
    * 기본 상태 이미지 (64x64px 권장): jay_basic.png
    * 점프 상태 이미지 (64x64px 권장): jay_jump.png
    * 충돌 상태 이미지 (옵션): jay_collision.png

* **장애물 이미지 (PNG 형식, 투명 배경):**
    * 다양한 형태의 장애물 3가지 이상
        * 낮은 장애물 (32x32px): obstacle_low.png
        * 높은 장애물 (32x64px): obstacle_high.png
        * 공중 장애물 (선택 사항): obstacle_air.png

* **배경 이미지:**
    * 기본 배경 이미지 (800x400px 권장): background.png
    * 전경 이미지 (800x200px, bottom of screen): foreground.png

### 4.2 사운드 에셋
* **게임 효과음 (WebAudio API 호환 형식: MP3 또는 WAV):**
    * 점프 효과음 (1초 이내): jump.mp3
    * 충돌 효과음 (1초 이내): collision.mp3
    * 점수 획득 효과음 (선택 사항): score.mp3

### 4.3 폰트 자원
* **기본 웹 폰트 활용**
    * 기본 시스템 폰트 사용 (로딩 시간 최소화)
    * 대체 폰트 설정 (fallback fonts)

## 5. 배포 (Pyodide) 및 구현 전략

### 5.1 Pyodide 구동 방식
* **구현 방식:** 
  * Pyodide를 활용한 WebAssembly 기반 Python 코드 실행
  * HTML/CSS/JS 프로젝트 내에서 파이썬 코드 로드
  * JavaScript와 Python 코드 간 양방향 통신 구현

### 5.2 GitHub Pages 배포 구조
* **파일 구조:**
  ```
  jump_game/
  ├── index.html         # 기본 연결 페이지
  ├── css/              # 스타일시트
  ├── js/
  │   ├── main.js       # Pyodide 초기화 및 게임 시작 코드
  │   └── ui.js         # UI 관련 기능
  ├── python/
  │   ├── main.py       # 게임 메인 코드
  │   ├── game.py       # 게임 로직 모듈
  │   ├── renderer.py   # 렌더링 모듈
  │   └── entities.py   # 게임 개체 구현 모듈
  └── assets/           # 게임 에셋 (이미지, 사운드 등)
  ```

### 5.3 로드 및 초기화 과정
1. 페이지 로드 시 Pyodide와 부트스트랩 스크립트 로드
2. Pyodide 초기화 완료 후 지연 로드를 통한 Python 모듈 로드
3. 그래픽 에셋 선조합 로딩 및 캐싱
4. Python 게임 코드와 HTML5 Canvas 연결
5. 사용자 이벤트 핸들링 설정

### 5.4 성능 최적화 방안
* **초기 로드 시간 최소화:**
  * 아스킴 로딩 전략 (로딩 화면 제공)
  * 필요한 라이브러리만 선택적 로드
* **실행 성능 최적화:**
  * 게임 루프 최적화 (requestAnimationFrame 활용)
  * 객체 풀링 및 객체 재사용
  * 하드웨어 가속화 API 활용 고려

## 6. 개발 단계 (상세 로드맵)

### 6.1 게임 로직 개발 (초기 1-2주)
* **기본 구조 설계**
  * 모듈화된 코드베이스 설계 (SOLID 원칙 적용)
  * 객체 클래스 정의 및 UML 다이어그램 작성

* **코어 게임 기능 구현**
  * 캐릭터 클래스 (위치, 점프 물리, 충돌 박스)
  * 장애물 관리자 (생성, 이동, 제거 로직)
  * 점수 시스템 구현
  * 충돌 감지 시스템

* **로컬 테스트 및 전통적 Python 게임 구동 검증**
  * 시간 단위 테스트 매트릭스 작성
  * 로컬 Pygame 환경에서의 버그 픽스

### 6.2 Pyodide 통합 개발 (3-4주)
* **HTML 기반 런타임 환경 구성**
  * 기본 HTML/CSS 구조 개발
  * Pyodide 초기화 및 로드 코드 개발
  * Python-JavaScript 양방향 통신 연계 구성

* **Canvas 기반 렌더링 시스템**
  * HTML5 Canvas API와 Python 코드 연결
  * 렌더링 최적화 전략 구현
  * 더블 버퍼링 및 레이어링 전략 적용

* **브라우저 동작 테스트 및 최적화**
  * 주요 브라우저 호환성 테스트
  * 성능 병목 분석 및 최적화
  * 이벤트 처리 및 입력 지연 해결

### 6.3 UI/UX 및 에셋 통합 (5주)
* **사용자 인터페이스 디자인**
  * 게임 메뉴, 점수판, 설정 화면 구현
  * 반응형 레이아웃 적용
  * 사용자 피드백 피드백 메커니즘

* **디자인 에셋 통합**
  * 캐릭터, 장애물, 배경 그래픽 구현
  * 사운드 효과 추가
  * 애니메이션 효과 구현

### 6.4 최적화 및 배포 준비 (6주)
* **성능 최적화**
  * 영역별 성능 상태 본득(프로파일링)
  * 로드 시간 최소화 및 지연 로드 도입
  * 성능 향상을 위한 코드 리팩토링

* **호환성 제고**
  * 크로스 브라우저 호환성 검증
  * 모바일 기기 대응 테스트

* **GitHub Pages 배포 초기 버전**
  * 배포 자동화 파이프라인 구성
  * 최종 테스트 및 버그 수정
  * 코드와 에셋 최종 정리
7.  **블로그 게시 준비:**
    * 최종 파일 구조 정리 및 문서화.

## 7. 비기능적 요구사항

* **단순성:** 게임 로직과 코드는 이해하고 수정하기 쉽도록 최대한 단순하게 유지합니다.
* **확장성:** 추후 새로운 기능(예: 다양한 아이템, 배경 변화)을 추가하기 용이한 구조로 설계합니다.
* **성능:** Pyodide 환경에서도 부드럽게 실행될 수 있도록 과도한 리소스 사용을 지양합니다.